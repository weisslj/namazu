<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
        "http://www.w3.org/TR/REC-html40/strict.dtd">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-2022-JP">
<LINK REV=MADE HREF="mailto:ccsatoru@vega.aichi-u.ac.jp">
<TITLE>Namazu: Security Considerations</TITLE>
</HEAD>
<BODY LANG="ja">
<H1>Namazuのセキュリティに関する考察</H1>
<P>Last Modified: 1/22/1999</P>
<HR>

<H2>基本方針</H2>

<P>
おそらく安全とは思いますが、確実とは言えません。 Namazu は完全に無
保証です。すべてあなたの責任のもとに運用してください。ただし、セキュ
リティの問題にはできる限り対応するつもりです。まずい点を見つけたら
こっそり<A HREF="mailto:ccsatoru@vega.aichi-u.ac.jp">連絡</A>してください。
</P>

<H2>考察</H2>

<UL>
<LI>一秒間に 1,000回アクセスしてくるような DoS には無効です。良識
に期待します。
<LI>HTTP Server を root 権限で動かすのはやめましょう (当然だけど)
<LI>namazu.cgi を setuid するのもやめましょう (必要ないし)
<LI>namazu.cgi は system(3) を使っていません
<LI>v1.2.0.2以降の namazu.cgi は外部コマンド (kakasi/chasen) を呼
    び出さなくなりました (fork, execを行なわない)
<LI>NMZ.slog への書き出しはロックを行なっていません<BR>
    (flock(2) でやればいいんだけど、 Win32 などでも動くのかな?)
<LI>CGIでは検索結果の最大同時出力数に制限をかけている (ディフォールト 100件)
<LI>同時に検索できるインデックスの数に制限をかけている (ディフォー
ルト 64個)
<LI>検索は遅くても数秒程度で終わる (正規表現が一番遅い)
<LI>無限ループは起こらないはず (100%とは言えません)
<LI>検索式の入力 ('&lt;' や '&gt;' といった記号) によって HTML の
出力を壊すことはできないはず
<LI>検索中に接続を切られるとどうなるの?<BR>
    → Apache ではその瞬間に kill されるようです
<LI>できるだけ新しいものを使ってください。 v1.3.0.1 以降がお勧めで
す
<LI>バッファが溢れる可能性は否定できません (気をつけてはいますが)
</UL>


<H2>謝辞</H2>

<P>
この文書の必要性を気づかせてくれた<A
HREF="mailto:yasuhi-a@is.aist-nara.ac.jp">あらきやすひろ</A>さんに
感謝します。
</P>

<H2>文責</H2>

<UL>
<LI><STRONG>氏名:</STRONG> 高林 哲 Satoru Takabayashi
<LI><STRONG>email:</STRONG> <A HREF="mailto:ccsatoru@vega.aichi-u.ac.jp">ccsatoru@vega.aichi-u.ac.jp</A>
</UL>


<HR>

<P>
email: <A HREF="mailto:ccsatoru@vega.aichi-u.ac.jp">ccsatoru@vega.aichi-u.ac.jp</A><BR>
<A HREF="http://openlab.ring.gr.jp/namazu/">Namazuのホームペイジへ</A>

</P>
<ADDRESS>
ccsatoru@vega.aichi-u.ac.jp
</ADDRESS>
</BODY>
</HTML>
