1999-11-05  Masao Takaku  <masao@ulis.ac.jp>

	* src/mknmz.pl.in: Move $EXCLUDE_REGEX related codes from
	isexcluded() to wanted().

1999-11-04  Masao Takaku  <masao@ulis.ac.jp>

	* src/mknmz.pl.in (parse_options): Fix a bug: can't update
	NMZ.status at '--update' option specified.

1999-11-04  Ryuji Abe  <raeva@t3.rim.or.jp>

	* nmz-config.in: New File.
	* Makefile.am (bin_SCRIPTS): Entry nmz-config.
	* configure.in: Removed OPT_INDEXDIR and OPT_CONFDIR related code.
	(AC_OUTPUT): Added nmz-config.
	* acconfig.h: Removed OPT_INDEXDIR and OPT_CONFDIR.
	* src/Makefile.am (DEFS): Defined -DOPT_INDEXDIR and -DOPT_CONFDIR. 

1999-11-03  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* namazu.spec.in: Add /usr/var/namazu/*, /usr/etc/namazu/*, 
	/usr/include/*, /usr/lib/* at the end.

	* Makefile.am (install-data-local): 
	$(mkinstalldirs) ${localstatedir}/${PACKAGE}/index

	* configure.in (OPT_INDEXDIR): Use ${localstatedir}/${PACKAGE}/index.

	* src/mknmz.pl.in (init): Implement $LNAG handling.

	* src/mknmz.pl.in, pl/codeconv.pl: Use util::islang().

	* pl/util.pl (islang): New subroutine.

	* pl/conf.pl.in: Set $LANGUAGE to "C".

	* configure.in: Abolish --with-japanese and --with-lang=LANG.
	Change order of --with-* options and reindent.

	* acconfig.h: Remove OPT_LANGUAGE.

	* configure.in (File::MMagic detection codes): Use 
	"use lib '$PMDIR';".

	* acinclude.m4: Modify --with-emacs=EMACS, --with-lispdir=DIR
	related codes to exclude unsuitable AC_MSG_ERR and messages.

1999-11-03  Rei FURUKAWA  <furukawa@tcp-ip.or.jp>

	* nmzidx.pl: Fixed lockfile related code.  
	Thanks to Mr. Hiroshi KOMATSU. [namazu-dev 706]

1999-11-02  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in: Add codes to prevent to remove Makefile when 
	doing 'make clean'. [namazu-dev 375]

	* nmz/Makefile.am (INCLUDES): Add "-I../intl" and remove "-I.".

	* acinclude.m4: Import AM_PATH_LISPDIR macro from Lookup
	<http://openlab.ring.gr.jp/lookup/>
	And modify a message a little bit.

	* configure.in: Add --with-pmdir=DIR option. [namazu-dev 582]

1999-11-02  Ryuji Abe  <raeva@t3.rim.or.jp>

	* acinclude.m4: Added libtool related macros from kakasi-2.3.1.

	* nmz/Makefile.am (include_HEADERS): Entry libnamazu.h.
	(libnmz_la_LDFLAGS): Set version-info to 0:0:0. Each libtool 
	library should be started with version infomation of `0:0:0'.

	* src/Makefile.am (LDADD): Linked libtool library (libnmz.la) 
	instead of real library (libnmz.a).

1999-11-01  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/conf.[ch], src/var.c: Introduce CONFDIR and abolish
	NAMAZU_CONF.
	
	* src/mknmz.pl.in: Use mknmzrc instead of mknmz.conf.
	
	* src/Makefile.am (confdir): Use $(sysconfdir)/$(PACKAGE).

	* conf/Makefile.am: Modify to handle namazurc and mknmzrc instead
	of namazu.conf-dist and mknmz.conf-dist
	
	* conf/namazurc: New file.

	* conf/namazu.conf-dist: Removed.
	
	* configure.in: Abolish --with-confdir. Use --sysconfdir instead
	for setting a config files directory.

	* **/*.[ch]: 's/namazuconf/namazurc/g'
	
	* src/*.[ch]: s/hlist_data/HLIST_DATA/g

	* configure.in: Fix --with-scoring=METHOD option.

	* configure.in: Add AC_SUBST(CONFDIR)
	Modify message for --with-confdir.

	* conf/Makefile.am (confdir): Use @CONFDIR@.

	* Makefile.am (DISTCLEANDIRS): Remove meaningless "conf/conf".

	* src/Makefile.am (confdir): Use @CONFDIR@.
	
	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.7.
	Add --with-confdir_DIR option.
	Fix --with-scoring=METHOD option.

1999-11-01  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* ltconfig, ltmain.sh, config.guess, config.sub: Added.

	* nmz/Makefile.am: Fixed unnecessary macro.

	* nmz/*: Added new directory and moved libnamazu.* files from 
	src/ directory.

1999-10-29  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* Seacrh-Namazu/*: Added new module.

1999-10-28  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* pl/wakati.pl (wakatize_japanese): s/Okurigana/okurigana/,
	s/Hiragana/hiragana/, s/Morph/morph/

1999-10-27  Rei FURUKAWA  <furukawa@tcp-ip.or.jp>

	* nmzidx.pl: Fixed lockfile related code

1999-10-27  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/usage.c (show_mini_usage): s/more options/more information/

1999-10-27  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* File-MMagic/Makefile.PL: Added AUTOHR and ABSTRACT paramaters.

1999-10-26  Rei FURUKAWA  <furukawa@tcp-ip.or.up>

	* pl/nmzidx.pl, src/gcnmz.pl.in: Close unused file handles.

1999-10-25  Ken-ichi Hirose <kenzo-@tama.or.jp>

	* configure.in: Added --without-file-mmagic option.

	* configure.in: change --with-tknamazu option 
      to --without-tknamazu.

	* src/usage.c: erase euctosjis(buf) for _WIN32 and __EMX__.

1999-10-22  Ryuji Abe <raeva@t3.rim.or.jp>

	* src/util.h [HAVE__VSNPRINTF]: Fixed macro definition.

1999-10-21  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in (LIBOBJS): vsnprintf.o was added when neither 
	  vsnprintf nor _vsnprintf was found.
	[EMXOS2]: Fixed CFLAGS and LDFLAGS.
	(AC_OUTPUT): Deleted entry macros/Makefile.

	* src/util.h [HAVE__VSNPRINTF]: Defined vsnprintf as _vsnprintf.

1999-10-19  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/libnamazu.{c,h}: Added some setting functions.

	* src/namazu.c: Moved set_redirect_stdout_to_file function.

1999-10-14  Ryuji Abe <raeva@t3.rim.or.jp>

	* acinclude.m4: Moved all macros previously defined 
	  macros/gettext.m4, macros/lcmessage.m4, and progtest.m4.
	
	* macros: Removed directory and all files.
	
	* Makefile.am(SUBDIRS): Removed macros.
	
	* configure.in: Added missing netscape configuration routine.
	(AM_ACLOCAL_INCLUDE): Removed.
	
1999-10-14  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/util.c (is_little_endian): Use WORDS_BIGENDIAN macro for
	determinig an endian type.
	
	* configure.in: Add AC_C_BIGENDIAN.

	* po/ja.po: Modify the usage message a bit.

	* src/usage.c (show_long_usage): Modify the usage message a bit.

1999-10-13  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/util.[ch]: Introduce is_little_endian() function.
	And use it in freadx().

	* src/search.[ch]: Abolish check_byte_order() function.

	* src/var.[ch]: Abolish OppositeEndian variable.


1999-10-13  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/idxname.{c,h}: Added.

1999-10-12  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/namazu.c : Moved some functions to libnamazu.c.

	* src/libnamazu.{c,h}: Created new files.

1999-10-11  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.6.

1999-10-07  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/{result.c, search.c}: Move output functions to output.c.

	* src/wakati.c: Remove some exit() functions.

1999-10-03  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in (complete_field_info): Add filename_to_title()
	calling. 
	
	* filter/{html,mailnews,man,msword,pdf,rfc}.pl: Remove
	filename_to_title() calling.

	* configure.in: Modify a message.
	
	* namazu.spec: Add "/usr/share/locale/*" at the end.

	* src/mknmz.pl.in (load_document): Fix typo: s/!=/!~/

1999-10-01  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/mknmz.pl.in (load_document): Fixed misrecognizing text/html
	type file.

1999-09-30  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in(AM_ACLOCAL_INCLUDE): New Macros.
	(AM_PATH_LISPDIR): New Macros.
	(AC_OUTPUT): Added filter/Makefile, lisp/Makefile, macros/Makefile, pl/Makefile.
	
	* Makefile.am(ACLOCAL_AMFLAGS): Removed.
	(SUBDIRS): Added filter lisp macros pl.
	(EXTRA_DIRS): Removed filter lisp macros pl conf.
	
	* conf/Makefile.am: Modified standard automake style.
	
	* filter/Makefile.am: New File.
	
	* macros/Makefile.am, pl/Makefile.am: Likewise.
	
	* macros/aclocal-include.m4: New File that derived from gnome-libs-1.0.16.
	
	* macros/lcmessage.m4: New File that derived from sh-utils-2.0.
	
	* macros/progtest.m4: Likewise.
	
1999-09-29  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/Makefile.am (INCLUDES): Add ../lib

	* po/Makefiel.in.in (update-po): Fix a subtle bug.
	
	* po/make_jis7_po.in: New file.

	* po/make_sjis_po: Fix a subtle bug by s/sjis/SJIS/.

1999-09-29  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/namazu.h: Change INDICES structure (add total, modes, pr,
	phrasehit members).
	
	* src/search.c (search_sub): Move some output process to 
	print_hit_count() function.

1999-09-28  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/codeconv.c (conv_ext): Add ja_JP.JIS7 handing.
	(zen2han): Add `static' on Z2H.

	* src/form.c (replace_query_value): Add conv_ext() calling.

	* conf/namazu.conf-dist (LANG): ja_JP.iso-2022-jp -> ja_JP.JIS7

	* src/util.c (strcasestr): Implement EUC handling.

	* src/{util,search}.c: Remove a duplicated define statement:
	#define iseuc(c)  ((c) >= 0xa1 && (c) <= 0xfe)

	* Makefile.am (install-data-local): Add the line:
	rm -f $(pkgdatadir)/template/*.in 

	* po/(*)sjis()*: Renamed -> ${1}SJIS${2}

	* po/(*)iso-2022-jp()*: Renamed -> ${1}JIS7${2}
	
	* template/NMZ.(*).ja_JP.iso-2022-jp: Renamed -> NMZ.${1}.ja_JP.JIS7

	* configure.in (AC_OUTPT): s/make_iso_2022_jp_po/make_jis7_po/;
	s/iso-2022-jp/JIS7/

	* po/make_sjis_po.in: s/sjis/SJIS/;

	* po/make_jis7_po.in: s/iso-2022-jp/JIS7/;

	* po/make_jis7_po.in: New file. (make_iso_2022_jp)

	* po/make_iso_2022_jp_po.in: Removed.
	
	* po/Makefile.in.in: Comment out codes for creating ja_JP.EUC and
	ja_JP.ujis. And do s/sjis/SJIS/; s/iso-2022-jp/JIS7/.
	
	* configure.in (ALL_LINGUAS): Add ja_JP.JIS7, ja_JP.SJIS.

	* configure.in (ALL_LINGUAS): Remove ja_JP.EUC, ja_JP.ujis,
	ja_JP.iso-2022-jp, ja_JP.sjis

1999-09-28  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/namazu.c (parse_options): Remove some exit() functions.

	* src/var.{c,h}: Add PhraseResult variable and PHRASERES type.

	* src/{search.c, namazu.c}: Devide hit count printing routine.

1999-09-27  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/codeconv.c (conv_ext): Add ja_JP.SJIS handling.

	* src/mknmz.pl.in (setup_magic): Modify a regex for RFC.

	* src/util.c (isnumstr): Add cast: (int)

	* src/util.c (diemsg): Remove #ifdef HAVE_VSPRINTF ...

	* configure.in (Add AC_REPLACE_FUNCS): Remove some functions.

	* configure.in: Add AC_REPLACE_FUNCS macro.
	
	* Makefile.am (SUBDIRS): Add lib.

	* lib/Makefile.am: New file.

	* lib/vsnprintf.c: New file imported from 
	gnome-1.0.40/gnome-libs-1.0.40/support.
	
	* lib/{memmove,strcasecmp,strstr,memset,strcspn,
	memcmp,strncasecmp}.c: New files imported from gettext-0.10.35/lib.
	
	* lib/{regex.[ch],getopt{,1}.[ch]}: Moved from src.
	
	* src/Makefile.am (namazu_SOURCES): Remove regex.[ch],
	getopt.[ch], getopt1.c
	
	* src/util.[ch]: Remove memmove();
	
	* src/i18n.c: Add putenv/setenv handling. 

	* src/i18n.c: Include <locale.h> if available.
	
	* configure.in (AC_CHECK_FUNCS): Add setenv.
	
	* conf/Makefile.am (mknmz.conf-dist): s!lib/!pl/!
	
	* src/Makefile.am (.pl): Replace libdir with  perllibdir.
	
	* src/Makefile.am (perllibdir): = $(pkgdatadir)/pl

	* src/Makefile.am (libdir): Rename to perllibdir
	
	* Makefile.am (EXTRA_DIRS): Replace lib with pl.

	* pl/*.pl, pl/*.in: New files. (moved from lib)
	
	* lib/*.pl, lib/*.in: Removed. (moved to pl)
	
	* src/mknmz.pl.in (make_headfoot): Abolish evaling.

	* lib/conf.pl.in: Remove a variable: $ADMIN. 

	* lib/var.pl.in: Remove a variable: $NMZ_URI.

	* configure.in: Add OPT_NMZ_URI="http://openlab.ring.gr.jp/namazu/".

	* configure.in (AC_OUTPUT): Add the following files.
	   template/NMZ.head
	   template/NMZ.foot
	   template/NMZ.head.ja_JP.iso-2022-jp
	   template/NMZ.foot.ja_JP.iso-2022-jp

	* template/{NMZ.head,NMZ.foot,NMZ.head.ja_JP.iso-2022-jp,
	NMZ.foot.ja_JP.iso-2022-jp}: Renamed: -> *.in

	* src/mknmz.pl.in: Add `use lib "@ADDITIONAL_INC@"' at the upper part.
	
	* configure.in: Modify File-MMagic related codes. [namazu-dev 523]

1999-09-27  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/{search.c, namazu.c}: Move output process from search.c to
	namazu.c.

	* src/mknmz.pl.in (setup_magic): Change rfc detection entry.

	* src/mknmz.pl.in: Add some conditions to call checktype_magic().

1999-09-26  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* template/NMZ.*.ja_JP.iso-2022-jp: Covert encoding: EUC-JP ->
	ISO-2022-JP 
	
	* src/mknmz.pl.in (write_body_msg, write_tips_msg,
	make_headfoot_pages): Get target files list with glob.
	
	* src/mknmz.pl.in: Abolish --enable-test related codes.
	
	* configure.in: Abolish --enable-test.
	
	* lib/find.pl: Restore fncmp().
	
	* po/Makefile.in.in (DISTFILES): Add ADDITIONAL_FILES.

	* po/Makefile.in.in: Add new macro: ADDITIONAL_FILES.

	* src/{usage,i18n}.c: Insert a header describing copyright.
	
	* src/*.c: Remove a statement "* This file must be encoded in
	EUC-JP encoding.".
	
	* src/codeconv.c: Remove EUC-JP characters.
	
	* src/output.c (print_msgfile): Use choose_msgfile();

	* src/form.c (read_headfoot): Use choose_msgfile();
	
	* src/i18n.[ch]: Introduce New function: choose_msgfile();
	
	* conf/namazu.conf-dist: Modify a description on LANG.
	
	* po/POTFILES.in: Remove message.c.
	
	* template/NMZ.{body,foot,head,tips}.en: Remove suffix.

	* template/NMZ.{body,foot,head,tips}.ja: Change suffix: ja ->
	ja_JP.iso-2022-jp.
	
	* src/util.c (debug_printf, wprintf, wprint): Do fflush(stdout) 
	at each calling.
	
	* src/var.c (NMZ_NAMES NMZ): Remove ending `.' from NMZ.head,
	NMZ.foot and NMZ.body.

	* src/message.h: Define some messages with #define.
	
	* src/message.c: Removed.
	
	* src/*.c: Add `static' specifier for all private functions.
	
	* src/wakati.[ch]: Refine detect_char_type() related codes by
	using enum.
	
	* src/search.[ch]: Refine detect_search_mode() related codes by
	using enum.
	
	* src/{cgi,codeconv,conf,form,message,namazu,re,search}.c:
	Add one line: #include "i18n.h"

	* src/{cgi,critical}.h: Move CGI-related critical values from
	cgi.h to critical.h. And decrease those values for safe.
	
	* src/{form,result,search}.c: Use codnv_ext() for converting
	internal encoding to external one before outputting messages.
	
	* src/codeconv.c: Introduce new functions: conv_ext() and euctojis()

	* src/codeconv.c: Rename function: codeconv() -> conv_ja_any_to_eucjp()
	
	* src/Makefile.am: Add i18n.[ch] to namazu_SOURCES.

	* src/i18.[ch]: New files.
	
	* src/namazu.c (main): Add setlocale() calling;
	
	* po/*.{po,pot}: Release MSG_MIME_HEADER from gettext().
	(make update-po && make)
	
	* src/{cgi,namazu,util}.c: Release MSG_MIME_HEADER from gettext().

1999-09-26  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/*.c: Remove all die() functions.

1999-09-25  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/util.c (diemsg): Surround vsnprintf() with #ifdef HAVE_VSPRINTF
	and #ifdef HAVE_VSNPRINTF for system having no vsnprintf().
	
	* configure.in: AC_FUNC_VPRINTF.

	* src/*.[ch]: s/fputx/html_print/g
	
	* src/output.c: Rename a function:  fputx() -> html_print().
	
	* src/*.c: Use print() and wprint();
	
	* src/util.[ch]: Introduce new functions: print() and wprint();
	
	* src/output.c: Introduce new functions: emprint();

	* src/output.c: Abolish euctojisput() and fputs_with_codeconv();
	
	* src/{cgi.form,namazu,output,result,search,wakati}.c:
	Abolish fputx's second argument (fp).

	* src/util.c (diemsg): Fix stdarg related bug: Surround vsnprintf()
	with va_start and va_end.

	* src/utilc: Fix an unterminated comment.
	
	* configure.in (AC_CHECK_FUNCS): Add getcwd, getwd, putenv, 
	strdup, strcspn, strspn, strstr. 
	
	* configure.in (AC_CHECK_HEADERS): Add limits.h and malloc.h.

	* configure.in: Add macros: AC_PROG_RANLIB, AC_C_INLINE,
	AC_FUNC_MMAP 

1999-09-25  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* search.c, parser.c, hlist.c: Remove die() function.

	* src/conf.{c,h}, namazu.c: Remove die() function.

	* src/util.{c,h}: Add diewithmsg() function.

	* src/magic.h: Add error code enum.

1999-09-24  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/utils.{c,h}: Add new function diemsg().

	* src/var.{c,h}: Add new variable Dyingmessage.

1999-09-23  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* po/make_iso_2022_jp.po: New file
	
	* po/make_sjis_po: charset=shift-jis -> charset=Shift_JIS
	
	* po/ja.po:  charset=euc-jp -> charset=EUC-JP
	
	* po/Makefile.in.in (update-po): Add a routine to create
	ja_JP.iso-2022-jp.po, ja_JP.EUC.po, ja_JP.ujis.po.
	
	* configure.in (ALL_LINGUAS): Add ja_JP.iso-2022-jp, ja_JP.EUC,
	ja_JP.ujis 
	
	* configure.in (AC_OUTPUT): Add po/make_iso_2022_jp_po.

1999-09-22  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/util.c (debug_printf, wprintf): Do fflush(stderr) at each 
	calling.
	
	* src/usage.c (show_mini_usage): Use fputs() instead of printf()
	because it doesn't use any printf format such as %s.
	
	* src/output.c (fputs_without_html_tag): Implement ISO-2022-JP
	handling. 
	
	* Makefile.am (ACLOCAL_AMFLAGS): Fix a typo: -l -> -I.

	* macros/gettext.m4: Imported reliable one from sh-utils-2.0/m4.
	
	* src/form.c (print_headfoot): \x1b -> \033

1999-09-21  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in(ALL_LINGUAS): Added ja_JP.sjis.
	
	* Makefile.am(ACLOCAL_AMFLAGS): Specified -l macros.
	(EXTRA_DIRS): Added macros.

	* po/Makefile.in.in: Derived from Akira Higuchi's mgedit snapshot.
	
	* po/make_sjis_po: New File. Derived from Akira Higuchi's mgedit snapshot.
	
	* po/ja_JP.sjis: New File.

	* macros: New Directory.

	* macros/gettext.m4: New File.

	* src/Makefile.am: More simplified make rules for perl scripts.

1999-09-21  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* acloca.m4: Fix a subtle problem relating to libintl.a reported
	in [namazu-dev 488] by refering sh-utils-2.0's aclocal.m4

1999-09-20  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in: Added AC_ISC_POSIX.

	* Makefile.am(AUTOMAKE_OPTIONS): Added 1.4.

	* src/Makefile.am: Likewise.

	* src/Makefile.am(LDADD): Use instead of namazu_LDADD.

1999-09-20  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/*.[ch]: Rename a function name: dprintf -> debug_printf
	due to the former causes a conflict with system library. 
	[namazu-dev 474]
	
	* src/*.c: Extract almost MSG_foobar into sources.
	
	* src/*.c: Rename variables:
	MSG_TOO_LONG_KEY     -> MSG_TOO_LONG_QUERY
	
	* src/re.c (regex_grep): Do re_free_pattern at the end.
	
	* src/cgi.c (get_cgi_vars): Fix PATH_INFO related codes.
	
	* src/*.c: Use wprintf() for warning and use dprintf() for debug
	messages. And eliminate wasteful if (Debug) { ... } statements.
	
	* src/util.c: Add new functions: wprintf() and dprintf().
	
	* src/wakati.c: Abolish using strlen2() but use strcspn() instead.
	
	* src/util.c: Abolish strlen2().
	
	* src/util.c: Abolish setprogname() but use PACKAGE macro instead.

1999-09-20  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* src/namazu.c: Fixed merge conflict.

1999-09-19  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in: Arrange indent.
	
	* src/*.c: Gettextized.
	
	* po/ja.po: Japanese messages prepared.
	
	* po/namazu.pot: Collect messages.

	* src/message.c: Gettextized.
	
	* src/magic.h: Separate enum declarations.
	
	* src/output.c (put_page_index): Fix enviromental variable related
	bugs by using safe_getenv().
	
	* src/{search,util}.c: Move safe_getenv() from search.c to util.c
	
	* src/Makefile.am (namazu_LIBS): Abolished.
	
	* po/ChangeLog: New file.
	
	* Makefile.am (DIST_SUBDIRS): add $(SUBDIRS)

	* po/en.po: Removed
	
	* configure.in (ALL_LINGUAS): Remove `en'
	
	* src/Makefile (CLEANDIRS): Renamed -> DISTCLEANDIRS

	* src/Makefile (CLEANFILES): Renamed -> DISTCLEANFILES
	
	* ABOUT-NLS: Replace this with latest one.
	<ftp://ring.asahi-net.or.jp/pub/GNU/ABOUT-NLS>

	* aclocal.m4: Import AC_ISC_POSIX related codes from aclocal.m4 of
	GNU sh-utils-2.0 for avoiding autoheader's complaints like:
	configure.in:375: AC_TRY_COMPILE was called before AC_ISC_POSIX

	* po/namazu.pot: New file.
	
	* acconfig.h: Prepare the following undefs
	ENABLE_NLS, HAVE_CATGETS, HAVE_GETTEXT, HAVE_LC_MESSAGES, HAVE_STPCPY
	
	* configure.in: Add AC_PREREQ(2.13) at the head.

	* configure.in: Add ALL_LINGUAS and AM_GNU_GETTEXT macros.

	* configure.in (AC_OUTPUT): intl/Makefile, po/Makefile.in

	* src/Makefile.am (always_built_SUBDIRS): Abolish this because
	autoreconf complains:
	AM_GNU_GETTEXT in configure.in but `po' not in SUBDIRS
	AM_GNU_GETTEXT in configure.in but `intl' not in SUBDIRS

	* src/Makefile.am (DEFS): New entry.

	* src/Makefile.am (localedir): New entry.

	* src/Makefile.am (INCLUDES): New entry.

	* src/Makefile.am (namazu_LDADD): New entry.
	
	* src/{mailutime,vfnmz,gtnmz,kwnmz.pl,gcnmz.pl}.in: Add
	"-*- Perl -*-" string for convenience with Emacs.

	* po/{ja.po,en.po,POTFILES.in}: New files.
	
	* src/{kwnmz,gcnmz}.pl.in: Add RCS Id at the head and chmod -x.
	
	* aclocal.m4: Adding contents of gettext.m4,  lcmessage.m4 and
	progtest.m4.

	* ABOUT-NLS: New file created by gettextize(1).
	
	* intl/{ChangeLog,dcgettext.c,gettext.h,libgettext.h,po2tbl.sed.in,
	Makefile.in,dgettext.c,gettextP.h,linux-msg.sed,textdomain.c, 
	VERSION,explodename.c,hash-string.h,loadinfo.h,xopen-msg.sed,
	bindtextdom.c,finddomain.c,intl-compat.c,loadmsgcat.c,
	cat-compat.c,gettext.c,l10nflist.c,localealias.c}:
	New files created by gettextize(1).	
	
	* po/Makefile.in.in: New files created by gettextize(1).
	
	* Makefile.am (always_built_SUBDIRS): Add intl and po
	
	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.5.

1999-09-19  Rei FURUKAWA  <furukawa@tcp-ip.or.up>

	* lib/nmzidx.pl: Replace nmzdb -> nmzidx,

	* src/kwnmz.pl.in: Replace nmzdb -> nmzidx,
 	Add --help option for usage.

	* src/gcnmz.in: Removed. (Renamed: gcnmz.in -> gcnmz.pl.in)

	* src/gcnmz.pl.in: New File. (Renamed: gcnmz.in -> gcnmz.pl.in)
	Replace nmzdb -> nmzidx

	* src/Makefile.am: add src/gcnmz.pl.in

	* configure.in: Renamed: gcnmz.in -> gcnmz.pl.in

1999-09-18  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/regex.[ch]: Imported from source codes of Ruby 1.4.2.

	* src/search.c (search_sub): Modify to only do check_access() at
	a CGI mode.
	
	* src/search.c (search_main): Modify not to print NMZ.tips.* at
	a command line mode
	
	* src/Makefile.am (CLEANFILES): Restore kwnmz.
	(I misunderstood)

	* configure.in: Modify codes for getting a version number of
	included File::MMagic for a cygwin environment. [namazu 998]

1999-09-17  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/Makefile.am (noinst_HEADERS): Integrated to namazu_SOURCES.

	* src/Makefile.am (LIBS): Renamed: -> namazu_LIBS.
	
	* src/Makefile.am (CLEANFILES): Remove kwnmz.
	
	* configure.in: Modfy check codes related to perl.

1999-09-16  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* template/NMZ.body.{en,ja}: Commented out Tkanamazu and namazu.el
	related descriptions.

1999-09-15  Masao Takaku  <masao@ulis.ac.jp>

	* src/{message.c,message.h,namazu.h,search.c,var.c}: Add a access
	control feature by hostname and IP address. (NMZ.access)

1999-09-15  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* doc/ja/nmz.html: Add a description for NMZ.access
	
	* src/{result,search,var}.c, src/var.h: Rename a variable name. 
	s/MoreShortFormat/ListFormat/

	* src/{namazu,cgi,var}.c, src/var.h: Abolish ShortFormat variable.
	
	* src/search.c (check_accessfile): Modify `rhost' handling.

	* src/search.c: Rename a function: s/get_env_safely/safe_getenv/
	
	* Makefile.am (EXTRA_DIST): s/ChangeLog.old.1.gz/ChangeLog.1/
	
	* src/{search,namazu,message}.c: Modify them to print
	NMZ.tips.{en,ja} when no documents found.
	
	* lib/{namazu,usage}.c: Move cat() from namazu.c to usage.c.
	
	* src/mknmz.pl.in, lib/var.pl.in: Add codes to create
	NMZ.tips.{en,ja} 

	* template/NMZ.tips.{en,ja}: New files.
	
	* src/mknmz.pl.in, lib/usage.pl: Add --mhonarc option.
	(same as --media-type='text/html; x-type=mhonarc')
	
	* ChangeLog.1: New file. (ChangeLog.old.1)
	
	* ChangeLog.old.1.gz: Removed.
	
	* doc/ja/nmz.html: New file. (htmlized version of nmz_files.txt)
	
	* doc/ja/nmz_files.txt: Removed.
	
	* lib/find.pl: Restore fncmp().
	(cvs update -j 1.8 -j 1.7 find.pl)
	
	* lib/nmzidx.pl: New file. (Renamed: nmzdb.pl -> nmzidx.pl)

	* lib/nmzdb.pl: Removed. (Renamed: nmzdb.pl -> nmzidx.pl)

	* src/kwnmz.pl (kwnmz): Modify not to convert a charcode.
	And translate some comments into English.
	
	* template/NMZ.result.normal: Modify a little bit.
	
	* src/search.c (search_sub): Modify a way to display idxnames at
	results.

1999-09-15  Rei FURUKAWA  <furukawa@tcp-ip.or.jp>

	* src/kwnmz.pl.in, lib/nmzdb.pl: New files.

	* src/Makefile.am, configure.in: Add src/kwnmz.

1999-09-14  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* template/NMZ.head.{en,ja}: Remove unnecessary
	<input type="hidden" name="whence" value="0">.

	* src/form.c (check_checkbox): Fix a subtle bug: put "checked"
	accidentally.
	
	* src/regex.[ch]: Imported from source codes of Ruby 1.4.
	
	* template/NMZ.{head,body}.{en,ja}: Use CSS1 for decoration.

1999-09-13  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/{conf.c,namazu.h,re.c,re.h,util.c,util.h,var.c,var.h}:
	Rearrange REPLACE related codes.

	* src/mknmz.pl.in (load_document): Modify the way to masure text
	size. [namazu-dev 417]

1999-09-13  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* New File::MMagic module.

	* Add setup_magic function.

1999-09-11  Masao Takaku <masao@ulis.ac.jp>

	* src/mknmz.pl.in (load_document): Add kanji contained check for
	$weighted_str.
	
	* src/mknmz.pl.in (put_field_index): Fix a bug with too long field
	texts.

1999-09-11  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in (write_message): Fix a bug: can't parepare
	NMZ.body.{en,ja}.
	
	* template/NMZ.body.ja: Rewrite a little.

	* template/NMZ.body.en: Rewrite all descriptions.

	* tknamazu/configure.in (AC_OUTPUT): Add tknamazu.spec.
	
	* configure.in: Suppress useless messages.

1999-09-11  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in: export $bindir/namazu and $bindir/mknmz in config.cache.

1999-09-10  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* Makefile.am (dist-hook): Handle CLEANFILES and CLEANDIRS well.

	* Makefile.am (CLEANDIRS): conf/conf File-MMagic/CVS.

	* Makefile.am (CLEANFILES): Add lib/var.pl lib/conf.pl.

	* Makefile.am (EXTRA_DIRS): Add `conf'.
	
	* src/mknmz.pl.in: Add --meta option for meta tag handling. 

	* src/conf.pl.in: Add $META_TAGS variable for specifying meta tags
	which you want to do field-specified search with.
	
	* filter/html.pl (get_meta_tags): Implement a feature to handle
	meta tags. Thanks to <eschmid@s.netic.de> for the good idea.
	
	* re.c (regex_grep): Fix a bug in no matching case.

1999-09-09  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* template/NMZ.body.ja: Rewrite descriptions.
	
	* configure.in: Avoid runnning tknamazu/configure when lynx or
	wish are not exist. [namazu-dev 402]
	
	* configure.in (AC_OUTPUT): Add src/vfnmz.

	* src/Makefile.am (bin_SCRIPTS): Add vfnmz.

	* src/vfnmz.in: New file.

1999-09-08  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.4.

	* template/NMZ.head.{en,ja}: Add a comment:
	<!-- <input type="hidden" name="idxname" value="foobar"> -->

	* src/mknmz.pl.in, lib/usage.pl: Add -h, --mailnews option for
	limitting target files to mail/news. (identical with
	--media-type=message/rfc822 )
	
	* src/mknmz.pl.in, lib/usage.pl: Add --media-type=type option for
	skipping media type guessing with File::MMagic.
	
	* lib/find.pl: Abolish fncmp().

1999-09-08  NOKUBI Takatsugu <knok@daionet.gr.jp>

	* Update File::MMagic.

	* Optimized filetype checking routine.

1999-09-07  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in: Using AC_CONFIG_SUBDIRS macro for tknamazu configuration.

	* src/Makefile.am(CLEANFILES): Only mknmz.

	* tknamazu/README.tknamazu: Renamed README.

	* tknamazu/ChangeLog: New File.

	* tknamazu/AUTHORS, COPYING, ChangeLog, INSTALL, NEWS: New Files. 

	* tknamazu/aclocal.m4, configure.in, configure: New Files.

	* tknamazu/Makefile.am: See tknamazu/ChangeLog.

	* tknamazu/tknamazu.tcl.in: See tknamazu/ChangeLog.

1999-09-07  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.3.

	* src/mknmz.pl.in (wordcount_sub): Improve efficiency a bit.
	
	* src/mknmz.pl.in: s/fid/docid/g

	* src/mknmz.pl.in: 'grep !/^$/, @words' -> 'grep {$_ ne ""} @words'

	* lib/seed.pl, src/mknmz.pl.in: Change @Seed handling.
	accesing @seed::Seed is slower than accessing @Seed directly.
	
	* Makefile.am (CLEANFILES): Remove lib/var.pl lib/conf.pl entries.

1999-09-07  NOKUBI Takatsugu <knok@daionet.gr.jp>

	* src/mknmz.pl.in: Changed to create File::MMagic object once.

1999-09-06  Ryuji Abe <raeva@t3.rim.or.jp>

	* configure.in: Fixed incorrect warnings.

	* src/Makefile.am: Removed $(bin_SCRIPTS) at CLEANFILES.

	* tknamazu/Makefile.am: Likewise.

1999-09-06  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* form.c (replace_action): Replace {cgi} with suitable namazu.cgi
	location on the fly.

	* src/util.c (subst): New function.

	* templates/NMZ.head.{ja,en}: Abolish $conf::CGI_ACTION but
	introduce {cgi} instead. And add [Help] link next to Search! button.
	
	* configure.in: Remove cgi-location related codes.

	* lib/conf.pl.in: Abolish $CGI_ACTION.

	* **/*.pl{,.in}, src/*.[ch]: Translate all comments into English.
	
	* src/namazu.h, src/*.[ch]: Rename names of hlist_data members.
	
	* template/NMZ.head.{ja,en}, src/{cgi,form}.c: Rename a CGI
	variable: key -> query
	
	* src/namazu.c: Rename option: --no-replace-uri -> --no-replace

	* src/message.c, lib/usage.pl: Rewrite Englisu usages.

1999-09-05  masao@ulis.ac.jp (Masao Takaku)

	* lib/usage.pl,src/message.c: Fix a typo and obsolete messages.

1999-09-05  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* configure.in, src/Makefile: Remove lex related codes.
	
	* **/*.pl{,.in}: Change all notations for representing hash value:
	key string must be single-quoted. e.g., $NMZ{log} -> NMZ{'log'}
	
	* lib/var.pl.in: Replace $NMZ{log} with $NMZ{'log'} 
	[namazu-dev 346]
	
	* src/field.c (get_field_data): Implement a simple cache
	mechanism.

	* src/result.c (replace_field): Fix a bug: don't call
	encode_entity() if HtmlOutput == 0; (it should always be called)

	* src/result.c: Rewrite a scanner for NMZ.result without lex.
	
	* src/result.c: New files.
	
	* src/result.l: Removed.
	
	* src/cgi.c (get_cgi_vars): Fix a bug: can't sort by score at CGI.

1999-09-04  masao@ulis.ac.jp (Masao Takaku)

	* src/mknmz.pl.in: Fix syntax error in perl5.004.

	* src/mknmz.pl.in: Fix flist_ptr bug (for checkpoint).

1999-09-04  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* tknamazu/Makefile.am (tknamazudir):
	s/@pkgdatadir@/$(pkgdatadir)$/ [namazu-dev 340]
	
	* src/mknmz.pl.in (put_log_to_logfile): Replace
	$var::NMZ{log} with $var::NMZ{'log'} [namazu-dev 339]
	
	* src/namazu.c: Fix lacks of *short_options bug.

	* Makefile.am (dist-hook): Remove "cp namazu.spec $(distdir)"
	
	* src/namazu.c: Change a timing of calling load_conf() for calling
	the function only once.
	
	* src/var.[ch], src/conf.c: Change the scope of ConfLoaded to
	static global in  conf.c.
	
	* configure.in (AM_INIT_AUTOMAKE): Change a version number to 1.9.1.
	
	* template/namazu.conf-dist: Modify a bit.

	* src/conf.c: Abolish $HOME substitution.
	
	* template/namazu.conf-dist: Rewrite descriptions.
	
	* src/conf.c: Rewrite an analizer for .namazurc or namazu.conf overall.
	
	* src/namazu.c: Fix --config option bug.
	
	* src/form.c: Modify to handle new type <form> ... </form>
	
	* src/cgi.c: Rename CGI variables. And Change a way to specify
	"sort=" variable.

	* template/NMZ.head.ja: Use Kanji in descriptions for "option".
	
	* src/*.[chl]: Change condition styles: 
	    "!strXXcmp()" -> "strXXcmp() == 0"
	
	* src/field.[ch]: Define FIELD_SAFE_CHARS in field.h and use it in
	field.c (is_field_safe_char).
	
	* src/*.[chl]: s/SortDirection/SortOrder/g;
	
	* src/cgi.c: Use strprefixcasecmp() instead of strncmp().

1999-09-03  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/hlist.c: Introduce set_rank() for STABLE sorting.

	* src/hlist.c: Abolish nmz_mergesort() and introduce qsort(3) for
	sorting. 
	
	* src/namazu.h, src/hlist.c: Change data structure of HLIST to
	better one.
	
	* src/mknmz.pl.in (append_index): Fix a bug: Can't update index
	correctly. [namazu-dev 322]
	
	* src/mknmz.pl.in (complete_field_info): Fix a bug: condition for
	setting "(unknown)" to $fields->{'from'} .

	* src/mknmz.pl.in: Rename: make_field_index -> complete_field_info

	* src/mknmz.pl.in (check_present_index): Fix a bug. [namazu-dev 322]
	
	* src/mknmz.pl.in: Replace get_unpackw() with readw() which is
	used in gcnmz.in by <furukawa@tcp-ip.or.jp>.
	
	* src/gcnmz.in: New gcnmz was contributed by <furukawa@tcp-ip.or.jp>.
	
	* src/hlist.c (prep_field_sort): Aply reverse_hlist() at first. 
	
	* src/search.c (search_main) : Don't re-sort if SortMethod ==
	SORT_BY_DATE.

1999-09-02  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/result.l: Fix --list option bug.

	* src/output.c: Modify a little bit.

	* src/*.[chl]: Improve efficiency of field-specified sorting.
	
	* src/{namazu,message}.c: Change a option name: 
	--reverse -> --ascending
	
	* src/*.[chl]: Implement namazu --sort=field:title option.
	
	* src/util.[ch]: Implement the following functions:
		int strprefixcmp(uchar *, uchar *);
		int strsuffixcmp(uchar *, uchar *);
		int strprefixcasecmp(uchar *, uchar *);
		int strsuffixcasecmp(uchar *, uchar *);
	
	* src/{cgi,form}.c: Make all string comparisons case insensitive.
	
	* template/*, src/*.c: s/dbname/idxname/g
	
	* lib/mhonarc.pl: Implement detection codes for MHonArc's index
	files such as maillist.hml or threads.html.

1999-09-01  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* acconfg.h: Rename several macro definiions for C program.
	(I edited config.h.in a few minutes ago but it's meaningless)

	* configure.in, config.h.in, src/{var,message.c}:
	Rename several macro definiions for C program.
	
	* src/*.[ch]: s/DEFAULT_DIR/DEFAULT_INDEX/g
	
	* src/namazu.c: s/dbnames/idxnames/g
	
	* src/hlist.c (malloc_hlist): Set hlist->n = n; at the ending.
	
	* src/{usage,message}.c: Modify namazu's usages.
	
	* src/conf.c (show_conf): Modify messages.

	* src/mknmz.pl.in, lib/var.pl.in: Rename an variable:
	%conf::Supported -> %var::Supported 
	
	* src/mknmz.pl.in: Add --show-config option and implement
	show_config() function. 

	* src/mknmz.pl.in (put_log): Modify loggin messages a bit.
	
	* tknamazu/Makefile.am (CLEANFILES): Add $(bin_SCRIPTS).
	
	* template/NMZ.head.{en,ja}: Abolish using "format={short,long}" 
	but use "result=ext" instead.
	
	* src/cgi.[ch]: Implemented codes to handle result=ext in CGI
	query.
	
	* src/{namazu,usage}.c: Add --result=ext option for specifying
	NMZ.result.ext.

	* src/{namazu,usage}.c: Change identifiers of  sevaral command
	line options.
	
	* src/namazu.c (parse_options): Be effective -s option.
	
	* src/result.l (print_hlist): Support choicing a correct
	NMZ.result.foobar file.
	
	* src/mknmz.pl.in (write_result_file): Support making multiple
	NMZ.result.* files.

	* template/NMZ.result.{normal,short}: New files.

	* template/NMZ.result: Removed
	
	* src/mknmz.pl.in, lib/var.pl.in, src/{hlist,search}.c:
	Implement codes to integrate NMZ.i and NMZ.w. [namazu-dev 294]

	* lib/util.pl (remove_tmpfiles): Add a condition to return if
	$var::Opt{debug} in the beginning of the function;
	
	* src/search.c: s/forward_match/prefix_match/g;
	s/backward_match/suffix_match/g;
	
	* src/mknmz.pl.in (load_document): Fix stupid bugs which I made
	yesterday. (I forgot preceding `$' mark for ref values)

 	* tknamazu/{Makefile.am,README.tknamazu}:
	s/tknamazu.xpm/tknamazu.ppm/g
	
	* tknamazu/tknamazu.tcl.in: Use .ppm instead of .xpm

	* tknamazu/tknamazu.ppm: New file.
	
	* tknamazu/tknamazu.xpm: Removed.

1999-09-01  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* filter/gzip.pl: Fix opposite condition in status() function.
	
	* ChangeLog: Reorder log.

	* Makefile.am: Remove necessary files in CLEANFILES.

	* src/mknmz.pl.in: Exclude gfilter.pl from filters/*.pl in 
	load_mocules() functions.

1999-08-31  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* lib/wakati.pm: Fix `tmpname' function name typo.

	* lib/var.pl, src/mknmz.pl.in: Add %REQUIRE_CODECONV variable.

	* filter/*.pl: Add codeconv() function.

	* filter/man.pl: Add codeconv::toeuc() before man_filter().

	* filter/pdf.pl: Add `-q' option with $pdfconvpath program.

	* lib/util.pl: Add filesize() function.

	* src/mknmz.pl.in: Add filesize check before reading file.

	* src/mknmz.pl.in: Add %Supported check.

	* filter/*.pl, src/mknmz.pl.in: Add return value on filter::filter()
	functions.

1999-08-31  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in (load_document): Move some codes from the bottom
	to "if (defined $var::REQUIRE_CODECONV{$mtype}) {}" block.
	
	* filter/mailnews.pl (filter): Add mailnews_citation_filter()
	process. (this fix an awful bug...)
	
	* conf/Makefile.am (mknmz.conf-dist): Modify regex for perl to
	treat %, @ prefixes as well as $.
	
	* Makefile.am (EXTRA_DIST): Add namazu.spec.
	
	* Makefile.am (DIST_SUBDIRS): Remove File-MMagic because it causes
	error at "make dist" time.
	
	* lib/var.pl.in: Remove serveal media types from
	%REQUIRE_CODECONV. (undo)

	* src/result.l (get_field_data): Insert commas if given filed is a
	numeric string.
	
	* src/util.c: Add isnumstr() and commas() functions.
	
	* tknamazu/{Makefile.am,README.tknamazu}:
	s/tknamazu.gif/tknamazu.xpm/g
	
	* tknamazu/tknamazu.tcl.in: Use .xpm instead of .gif

	* tknamazu/tknamazu.xpm: New file.
	
	* tknamazu/tknamazu.gif: Removed.
	
	* lib/var.pl: Add serveal media types into %REQUIRE_CODECONV.
	
	* src/mknmz.pl.in (generate_uri): Modify a way of applying eval.
	
	* src/mknmz.pl.in, lib/usage.pl: Add --update=s and implement
	its codes.

	* src/mknmz.pl.in, lib/usage.pl: Add --deny=s --exclude=s and
	implement their codes.
	
	* src/mknmz.pl.in: Modify it to be able to take multiple targets
	as command line arguments.
	
	* lib/util.pl: Modify cdie() to use `exit' instead of `die'
	because `die' cause a annoying message for ordinary users. :-)
	
	* src/mknmz.pl.in, lib/usage.pl: Add --replace=s option for
	transforming URI. And abolish a PREFIX argument in command line.
	
	* filter/gfliter.pl, filter/mailnews.pl: Move uuencode_filter()
	from gfilter.pl to mailnews.pl.
	
	* filter/html.pl: s/url/uri/g;
	
	* lib/conf.pl.in: Change $DEFAULT_FILE: _default -> index.html

1999-08-31  Ryuji Abe <raeva@t3.rim.or.jp>

	* Makefile.am: If configured, tknamazu will be built. Changed to 
	  use dist-hook section to distribute namazu.spec.

	* configure.in: Bumped version to 1.90. Added tknamazu configuration.

	* namazu.spec.in: Deleted COMMITTERS at %files.

	* src/Makefile.am: Cleaned up.

	* tknamazu/README: Renamed README.tknamazu.

	* tknamazu/Makefile.am: New file.

	* tknamazu/Makefile.in: Likewise.

	* tknamazu/tknamazu.tcl: Renamed tknamazu.tcl.in with autoconfize.

	* tknamazu/Makefile: Removed.

	* tknamazu/Makefile.W32: Likewise.

	* tknamazu/tknamazu.sample: Likewise.

	* tknamazu/tknamazu.bat.sample: Likewise.

1999-08-30  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* lib/codeconv.pl: Fix `tmpname' function name typo.

	* Makefile.am: Ignore test command return value on 
	  install-data-local target.

1999-08-30  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* Makefile.am (install-data-local): Remove codes creating
	namazu.conf and mknmz.conf.
	
	* src/mknmz.pl.in lib/util.pl: Move remove_tmpfiles from
	src/mknmz.pl.in to lib/util.pl. And modify it.
	
	* lib/util.pl: Add `cdie()' function to remove temporary files
	before mknmz die. mknmz MUST always dies with this function.
	
	* src/mknmz.pl.in (read_config): Use `do' instead of `require' for
	multiple calling of read_config().
	
	* lib/conf.pl: New file for containing default values which may
	overriden by mknmz.conf or ~/.mknmzrc
	
	* conf/mknmz.conf-dist.in: Removed
	
	* conf/Makefile.am : New file for creating mknmz.conf-dist at make
	time.
	
	* src/Makefile.am (install-data-local): Add codes to Removed
	`Makefile*' in the install directory. (for `conf' directory)

	* conf/mknmz.conf-dist.in: Append "|.*\.pdf|.*\.doc" regex into
	$ALLOW_REGEX for handling pdf and msword documents by default.
	And remove `_default' target.
	
	* src/mknmz.pl.in, conf/mknmz.conf: Abolish $FILE_SIZE_LIMIT but
	introduce $TEXT_SIZE_MAX instead for handling binary files such as
	pdf and msword.

	* src/mknmz.pl.in, lib/usage.pl: Abolish the following options and
	  remove their codes.
	    -R, --no-regex-index
	    -W, --no-date-index
	    -X, --no-field-index
	    -M, --no-mhonarc
	    -L, --no-line-adjust
	    -h, --rfc822   (dummy option alives)
	    -u, --uuencode (dummy option alives)
	    -r, --man

	* src/mknmz.pl.in, lib/usage.pl: Change the option letter for 
	`--lang=s': `-l' -> `-L'

	* filter/*.pl: s/ unless \$var::Opt{NoLineAd};/;/
	
	* **/*.pl{,.in}: Lower all keys of %var::Opt.
	
	* src/mknmz.pl.in: Remove all codes like "while (<$fh>)"
	because of its deanger. ($_ is a global value)
	
	* src/mknmz.pl.in, lib/var.pl: Abolish NMZ.{total,keys} and
	instead introduce NMZ.status for their values.
	
	* src/mknmz.pl.in (put_registry): Fix a variable name typo.
	
	* filter/*.pl: Change timing of dosing util::tmpnam()

	* lib/util.pl (tmpnam): Name file name with $var::OUTPUT_DIR
	
	* src/mknmz.pl.in, lib/var.pl: Change all NMZ.* file name
	representations using %var::NMZ instead of %var::File. 

	* src/mknmz.pl.in (make_headfoot): Fix $templatedir2.
	
	* src/{namazu,message}.c: Rename options: s/--hit-count/--count/
	s/output-file/output/
	
	* lib/util.pl: Remove useless codes from dprint and vprint.

1999-08-29  masao@ulis.ac.jp (Masao Takaku)

	* src/search.c: Ignore TOO_MUCH_HIT word in phrase query.

1999-08-29  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in (make_field_index): Add codes to set '(unknown)'
	to $fields->{'from'} when it's not set.
	
	* src/Makefile.am: Fix lacks of noinst_HEADERS
	
	* lib/util.pl (readfile): Comment out $conf::FILE_SIZE_LIMIT
	condition codes.
	
	* src/mknmz.pl.in: Abolish use of $size argument and modify size
	handling to treat a binary file well such as .gz, .pdf, .doc. 

	* filter/*.pl: Abolisu use of $size argument.

	* src/mknmz.pl.in: Abolish use of $ctrl in check_file() and
	load_document().

	* lib/util.pl (checkcmd): Fix a typo.
	
	* filter/mhonarc.pl (mediatype): Fix typos.

	* filter/*.pl: s/\$contents/\$contref/g
	
	* src/mknmz.pl.in: Change timing of code conversion.
	
	* lib/codeconv.pl: Add eucto() function.

	* src/mknmz.pl.in: Remove codeconv() function.
	
	* filter/rfc.pl (rfc_filter): Fix bad use of
	html::encode_entity()
	
	* src/mknmz.pl.in: Remove istext() function.

	* src/mknmz.pl.in (load_document): Use File::check_binary()
	instead of istext().
	
	* filter/html.pl (get_title): Fix.

	* src/mknmz.pl.in (namazu_core): Remove $url.

1999-08-28  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in: Add istext() and codeconv() functions.
	
	* src/mknmz.pl.in (load_document): Move a place of codes of code
	conversion because its timing was bad.

	* filter/gfilter.pl: New file.
	
	* filter/*.pl: s/filter ($$$$$$$)/filter ($$$$$$)/

	* src/mknmz.pl.in: s/checktype_content/checktype_contents/
	
	* src/mknmz.pl.in: Add global variable $TestMode for testing.
	
	* configure.in: Add --enable-test option for testing.
	
	* src/search.c (hash): Modify "j % 4" -> "j & 03"

	* src/mknmz.pl.in (hash): Modify "$i % 4" -> "$i & 03"

	* lib/seed.pl: New file (rename <- seed.pl)

	* lib/hash.pl: Remove   (rename -> seed.pl)
	
	* src/mknmz.pl.in: Add `readconf()' function.
	
	* lib/util.pl: Modify `dprint' and `vprint' to print prefix
	characters everytime.
	
	* src/mknmz.pl.in: Print a mediatype at processing time by
	default.
	
	* filter/*.pl: Modify them to use `vprint()' to print verbose
	messages. 

	* filter/*.pl: Fix typos.

	* lib/util.pl: Add funtion called 'vprint()' for printing verbose
	messaegs. 
	
	* filter/supported.pl: Removed
	
	* Makefile.am (EXTRA_DIST): Add ChangeLog.old.1.gz
	
	* ChangeLog.old.gz: Old ChangeLog (separated)
	
	* ChangeLog: Separate.
	
	* lib/usage.pl: Convert ISO-2022-JP -> EUC-JP

	* filter/pdf.pf: Remove @PDFTOTEXT_PATH@.

	* filter/gzip.pl: Remove @GZIP_PATH@.
	
	* ChangeLog: Change order to place a latest log on the top. 
	
	* Makefile.am (install-data-local): Add codes to creat configs
	file if no config files exist. 

	* src/{mknmz.pl.in,Makefile.am}: Add codes to handle CONFDIR.

	* **/*.pl{,.in}: Move non-config variables from conf:: to var::.

	* lib/conf.pl.in: Removed

	* **/*.pl{,.in}: s/foreach /for /g;

	* conf/mknmz.conf-dist.in: New file.

	* configure.in: Modify AC_OUTPUT.

	* lib/var.pl.in: New file.

	* lib/namazu.conf-dist: Remove.

	* configure.in: Remove filter command detection codes.

	* filter/rfc.pl.in: Fix rfc_filter();

	* filter/msword.pl.in: Fix status();

	* filter/mailnews.pl: Fix mailnews_filter arguments.

	* filter/html.pl: Fix html_filter() arguments.

	* filter/mhonarc.pl: Fix a typo.

	* **/*.pl{,.in}: Restore prefix `util::'

	* src/*.[ch]: Rename HLIST_MAXMAX -> RESULT_MAX.

1999-08-27  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* lib/util.pl: Add checkcmd function.

	* filter/*.pl, src/mknmz.pl.in: Implement dynamic command ditection.

	* lib/conf.pl.in: Add %supported variable.

1999-08-27  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in: Silence warnings.
	
	* src/*.[ch]: Rearrange many codes.

	* src/{var.c,var.h,em.h,magic.h,critical.h}: New files.

	* src/{type.h,values.c,variable.h,enum.h}: Remove.

	* lib/html.pl: Remove.

	* Makefile.am: Add AUTOMAKE_OPTIONS = no-dependencies

	* src/*.[ch]: Rename variables for NMZ.* files.

	* mknmz, namazu: Change behavior when no arguments are given to
	show simple messages like "Try `namazu --help' for more options."
	by using show_mini_usage().

	* src/mknmz.pl.in: Add show_mini_usage();

	* src/mknmz.pl.in, filter/*, lib/*: s/util:://g

	* lib/util.pl: Remove `package util'

	* lib/util.pl: Rename some functions

	* src/mknmz.pl: Rename some functions

	* Makefile.am, src/Makefile.am: Change packagedir (omit @VERSION@)
	[namazu-dev 192]

1999-08-26  Ryuji Abe <raeva@t3.rim.or.jp>

	* Makefile.am: Added namazu.spec to EXTRA_DIST and removed rpm target.
        
	* configure.in: Added AC_OBJEXT macro.
        
	* namazu.spec.in: See %changelog section.

1999-08-26  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* filter/*, lib/filter.pl, src/mknmz.pl.in: Fix $title probrem.

1999-08-26  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* src/configure.in: Add codes to make filter/supported.pl.
	[namazu-dev 199]

	* configure.in: Add codes to detect Compress::Zlib module.
	
	* src/Makefile.am: Add "libdir" macro.

	* Makefile.am: Change dist-hook: to remove CVS directories.

	* configure.in: Add codes to chedk "File::MMagic" module.

	* Makefile.am: Add "@FILE_MMAGIC@" into SUBDIRS

	* Makefile.am: Add "File-MMagic" into EXTRA_DIST

	* Makefile.am: Add CLEANDIRS entry (additional macro)

	* Makefile.am: Add "supported.pl" into CLEANFILES.

	* filter/supported.pl: New file.

	* src/configure.in, filter/{man.pl,compress.pl}: Substitute
	@{GROFF,ZCAT}_PATH@ for @OPT_HELPER_{GROFF,ZCAT}@.

	* src/util.c (die): Print program name in error message.

	* src/message.[ch]: Change a variable MSG_MIME_HEADER to macro.

	* src/values.c: Set HtmlOutout to 0.

	* Makefile.am: Modify install-data-local and dist-hook.

	* configure.in: Modify AC_OUTPUT according to removed files.

	* src/Makefile.am: Add an CLEANFILES entry.

	* src/{clnmz.in,rvnmz.in,vfnmz.in}: Removed files.

	* Makefile.am: Add an CLEANFILES entry.

1999-08-25  Satoru Takabayashi  <satoru-t@is.aist-nara.ac.jp>

	* Makefile.am, src/Makefile.am: Change a directory structure for
	installing.

	* src/mknmz.pl.in: Fix conflicted parts. (temporary)

	* template/NMZ.*: New files.

	* lib/NMZ.*: Remove files.

	* src/{re.c,usage.c,message.c,field.c}: New files.

	* src/{cgi.h,field.h,hlist.h,parser.h,result.h,codeconv.h,form.h,
	message.h,re.h,search.h,variable.h,conf.h,type.h,wakati.h,enum.h,
	output.h,usage.h}: New files.

	* src/*.[ch]: Rerrange C coding styles.

	* configure.in, src/Makefile.am, src/wdnmz.in:
	Remove wdnmz.in

1999-08-25 NOKUBI Takatsugu <knok@daionet.gr.jp>

	* ChangeLog: merge conflicted parts.

1999-08-24 NOKUBI Takatsugu <knok@daionet.gr.jp>

	* lib/conf.pl.in, lib/filter.pl, lib/util.pl, src/mknmz.pl.in:
	  merge with knok-filter-1.

1999-08-23  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/namazu.c: Implement a suicide code.

	* src/mknmz.pl.in: Implement a signal handler for SIGINT (mknmz)

	* src/{hlist.c,result.l,output.c}, lib/NMZ.result: Implement a
	keyword emphasizing in HTML mode. (rough implementation)

	* src/form.c: Modified not to display ugly '<>' in a title of
	  HTML.

1999-08-23 NOKUBI Takatsugu <knok@daionet.gr.jp>

	* Makefile.am, configure.in: merge with knok-filter-1.
	* lib/util.pl: merge and add tnpnam function.

1999-08-13  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in: Change index formats of NMZ.[ip] to compress
	them.

	* src/search.c, src/hlist.c: Support new formats.
	  - NOTE: an old index format is no longer supported.

	* lib/NMZ.result: Modify a little bit.

	* src/conf.c, src/namazu.c: Modify LIST implementations a bit.

1999-08-12  masao@ulis.ac.jp (Masao Takaku)

	* src/search.c: Fix TfIdf scoring bug.

	* src/namazu.h, src/values.c: Delete NMZ.{f,fi} related code.
	
1999-07-22  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* configure.in: Add a feature to determine admin's email address
	automatically: imported the code from Apache's buildinfo.sh

1999-07-09  masao@ulis.ac.jp (Masao Takaku)

	* mknmz.pl.in: Fix field_indices bug occurred at re-exec

	* mknmz.pl.in: Fix -k and -c options bug

	* src/Makefile.am: Added getopt.c, getopt1.c, getotp.h entries 

1999-07-06  masao@ulis.ac.jp (Masao Takaku)

	* mknmz.pl: Fix --checkpoint, --include, --target-list
	related bugs.

	* Makefile.am, src/Makefile.am: Fix lib directory and
	add getopt.[ch]
	
1999-06-12  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/result.l: New file. formatter for search results 
	made by using lex

	* src/result.c: New file. made by lex automatically

	* src/{messages,search,form}.c: lower all HTML elements

	* lib/NMZ.*.{en,ja}: lower all HTML elements

	* lib/NMZ.results: New file. a template file for search results

	* src/regex.[ch]: Reimported sources from Ruby v1.2.5
	
1999-05-30  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/namazu.c: Modified it to use GNU getopt.c for parsing
	command line options and to support long-name options.

	* src/getopt.[ch], src/getopt1.c: GNU getopt.c added.
	
1999-05-29  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* lib/conf.pl.in: Modified a usage message in Japanese vastly.

	* src/mknmz.pl: Modified command line option parsing codes
	using Getopt::Long module.

	* src/cgi.c: Fixed validate_dbname() bug and
	  - [MAEDA Atusi <maeda@is.uec.ac.jp>] - patch

	* src/hlist.c: Fixed put_hlist bug
	  - [MAEDA Atusi <maeda@is.uec.ac.jp>] - report

	* src/namazu.c: Modified command line option parsing codes
	
1999-05-14  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl: Fixed lockfile related code (subtle problem)

	* lib/html.pl: Modified parse_robots_txt a little bit

1999-05-07  Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp>

	* src/mknmz.pl.in: Fixed -F & -s option bug [namazu 647]
	  - [SHIOZAKI Takehiko <takehi-s@ascii.co.jp>] - report
	
